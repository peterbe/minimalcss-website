(this["webpackJsonpminimalcss-website"]=this["webpackJsonpminimalcss-website"]||[]).push([[0],{26:function(e,t,a){e.exports=a(44)},31:function(e,t,a){},38:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(20),l=a.n(s),i=a(6),c=a(7),o=a(9),m=a(8),u=a(10),h=a(1),d=(a(31),a(25)),p=a(21),f=a.n(p),v=(a(35),a(22)),b=a.n(v),E=(a(38),a(39),a(23)),g=a.n(E),y=a(14),N=a.n(y),w="https://minimalcss.app";var S=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={result:null,fetching:!1,fetchingUrl:null,errorMessage:null,serverError:!1,previousUrls:JSON.parse(window.sessionStorage.getItem("previousUrls")||"[]"),url:w},e.fetchResult=function(){var t=e.state.url;if(!t.trim())throw new Error("no url");return e.setState((function(e){return{fetching:!0,result:null,fetchingUrl:t,errorMessage:null,serverError:!1}})),fetch("https://api.minimalcss.app/minimize",{method:"POST",body:JSON.stringify({url:t}),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(a){e.setState({fetching:!1}),a.ok?a.json().then((function(a){if(a.error)e.setState({errorMessage:a.error,serverError:!1});else{var n=g()(a.result.finalCss,{indent:"  ",autosemicolon:!0});a.result._prettier=n,e.setState({result:a,errorMessage:null,serverError:!1},(function(){var n=a.result.stylesheetContents,r=0;Object.keys(n).length&&(r=Object.keys(n).map((function(e){return n[e].length})).reduce((function(e,t){return e+t})));var s=a.result.finalCss.length,l={url:t,savings:r-s,time:(new Date).getTime()},i=e.state.previousUrls.filter((function(e){return e.url!==t}));i.unshift(l),e.setState({previousUrls:i},(function(){window.sessionStorage.setItem("previousUrls",JSON.stringify(i))}))}))}})):a.json().then((function(t){t&&t.error?e.setState({errorMessage:t.error,serverError:!1}):e.setState({errorMessage:"Server request failure (status=".concat(a.status,")"),serverError:!1})})).catch((function(t){console.log("".concat(a.status," error wasn't JSON")),e.setState({errorMessage:"Server request failure (status=".concat(a.status,")"),serverError:!1})}))})).catch((function(t){e.setState({errorMessage:"API call failed: ".concat(t),serverError:!0})}))},e.submitForm=function(t){t.preventDefault();var a=e.state.url.trim();if(a){var n=e.props.location.pathname;return n+="?url=".concat(encodeURIComponent(a)),e.props.history.push(n),e.fetchResult()}},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){if(this.props.location.search){var e=function(e,t){for(var a=e.substring(1,e.length).split("&"),n=0;n<a.length;n++){var r=a[n].split("=");if(decodeURIComponent(r[0])===t)return decodeURIComponent(r[1])}}(this.props.location.search,"url");e&&this.setState({url:e.trim()},this.fetchResult)}}},{key:"componentDidUpdate",value:function(e){e.location!==this.props.location&&this.state.result&&this.setState({result:null})}},{key:"render",value:function(){var e=this,t=this.state.previousUrls.filter((function(t){return!e.state.fetchingUrl||e.state.fetchingUrl!==t.url}));return r.a.createElement("section",{className:"hero home"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container has-text-centered"},r.a.createElement("form",{onSubmit:this.submitForm},r.a.createElement("div",{className:"field is-grouped"},r.a.createElement("p",{className:"control is-expanded"},r.a.createElement("input",{className:"input is-medium",type:"url",value:this.state.url,onChange:function(t){e.setState({url:t.target.value},(function(){if(e.state.url.startsWith(w)&&e.state.url!==w)e.setState({url:e.state.url.replace(w,"").trim()});else if((e.state.url.match(/:\/\//g)||[]).length>1){var t=Object(d.a)(e.state.url.matchAll(/http?s:\/\//g)),a=t[t.length-1];e.setState({url:e.state.url.slice(a.index).trim()})}}))},placeholder:"For example. ".concat(w)})),r.a.createElement("p",{className:"control"},r.a.createElement("button",{type:"submit",className:this.state.fetching?"button is-info is-medium is-loading":"button is-info is-medium",disabled:this.state.fetching},"Go!")))))),r.a.createElement("div",{className:"section main"},r.a.createElement("div",{className:"container"},this.state.fetching||this.state.errorMessage||this.state.result||this.state.previousUrls.length?null:r.a.createElement("p",null,r.a.createElement("i",null,"Waiting for you to submit a URL above to show some cool stuff.")),this.state.fetching?r.a.createElement(x,null):null,this.state.errorMessage?r.a.createElement(O,{message:this.state.errorMessage,serverError:this.state.serverError}):r.a.createElement(C,{result:this.state.result}))),r.a.createElement(k,{previousUrls:t}))}}]),a}(r.a.PureComponent),k=r.a.memo((function(e){var t=e.previousUrls;return t.length?r.a.createElement("div",{className:"section previous-urls"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"box",style:{textAlign:"left"}},r.a.createElement("h4",{className:"title is-3"},"Previous URLs Submitted"),r.a.createElement("table",{className:"table"},r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e.url},r.a.createElement("td",{className:"overflowing",style:{width:"70%"}},r.a.createElement("a",{href:"/?url=".concat(encodeURIComponent(e.url))},e.url)),r.a.createElement("td",null,r.a.createElement("small",null,r.a.createElement(j,{mseconds:(new Date).getTime()-e.time,suffix:"ago"}))),r.a.createElement("td",null,"Saving ",U(e.savings)))}))))))):null})),j=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={mseconds:0},e._refresh=function(t){window.setTimeout((function(){e.dismounted||(e.setState({mseconds:e.state.mseconds+1e3*t}),window.setTimeout((function(){e._refresh(t)}),1e3*t))}),1e3*t)},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this._refresh(10)}},{key:"componentWillUnmount",value:function(){this.dismounted=!0}},{key:"render",value:function(){var e=this.props.suffix;return"".concat(function(e){var t=Math.floor(e/1e3),a=Math.floor(t/3600);if(a>0)return 1===a?"1 hour":"".concat(a," hours");var n=Math.floor(t/60);return n>0?1===n?"1 minute":"".concat(n," minutes"):"seconds"}(this.state.mseconds)," ").concat(e)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{mseconds:e.mseconds}}}]),a}(r.a.PureComponent),O=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"box"},r.a.createElement("h3",{className:"title"},this.props.serverError?"Server Request Error":"Minimization Error"),this.props.serverError?null:r.a.createElement("div",{className:"notification is-warning"},"The request to ",r.a.createElement("code",null,"minimalcss-server")," worked but the actual minimization work failed."),r.a.createElement("div",{className:"notification is-danger"},r.a.createElement("pre",null,this.props.message)))}}]),a}(r.a.PureComponent),C=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={showPrettier:!1,copiedToClipboard:!1},e.toggleShowPrettier=function(t){e.setState((function(e){return{showPrettier:!e.showPrettier}}))},e}return Object(c.a)(a,[{key:"componentWillUnmount",value:function(){this.dismounted=!0}},{key:"render",value:function(){var e=this,t=this.props.result;if(null===t)return null;if(t.error)return r.a.createElement("div",{className:"box"},r.a.createElement("h3",{className:"title"},"Error..."),r.a.createElement("div",{className:"notification is-danger"},r.a.createElement("pre",null,t.error)));var a=t.result.stylesheetContents,n=0;Object.keys(a).length&&(n=Object.keys(a).map((function(e){return a[e].length})).reduce((function(e,t){return e+t})));var s=t.result.finalCss.length;return r.a.createElement("div",{className:"box",style:{textAlign:"left"}},r.a.createElement("h3",{className:"title is-3"},"Results"),r.a.createElement("nav",{className:"level"},r.a.createElement("div",{className:"level-left"},r.a.createElement("div",{className:"level-item"},r.a.createElement("button",{type:"button",className:"button is-rounded",onClick:this.toggleShowPrettier,disabled:!this.state.showPrettier},"Raw CSS"),r.a.createElement("button",{type:"button",className:"button is-rounded",onClick:this.toggleShowPrettier,disabled:this.state.showPrettier},"Pretty CSS"))),r.a.createElement("div",{className:"level-right"},r.a.createElement("p",{className:"level-item"},r.a.createElement("button",{className:"button",onClick:function(a){e.state.showPrettier?N()(t.result._prettier):N()(t.result.finalCss),e.setState({copiedToClipboard:!0},(function(){window.setTimeout((function(){e.dismounted||e.setState({copiedToClipboard:!1})}),3e3)}))}},this.state.copiedToClipboard?"Copied to clipboard":"Copy to clipboard")))),r.a.createElement(f.a,{component:"pre",className:"language-css"},this.state.showPrettier?t.result._prettier:t.result.finalCss),r.a.createElement("nav",{className:"level results-level"},r.a.createElement("div",{className:"level-item has-text-centered"},r.a.createElement("div",null,r.a.createElement("p",{className:"heading"},"Total size (before)"),r.a.createElement("p",{className:"title"},U(n)))),r.a.createElement("div",{className:"level-item has-text-centered"},r.a.createElement("div",null,r.a.createElement("p",{className:"heading"},"Size (minimal)"),r.a.createElement("p",{className:"title"},U(s)))),r.a.createElement("div",{className:"level-item has-text-centered"},r.a.createElement("div",null,r.a.createElement("p",{className:"heading"},"Size reduction"),r.a.createElement("p",{className:"title"},U(n-s))))),r.a.createElement("div",{className:"content"},r.a.createElement("h4",{className:"title is-4"},"Stylesheets"),r.a.createElement("table",{className:"table"},r.a.createElement("tbody",null,Object.keys(a).map((function(e){return r.a.createElement("tr",{key:e},r.a.createElement("td",null,r.a.createElement("a",{href:e},e)),r.a.createElement("td",{style:{textAlign:"right"}},r.a.createElement("b",null,U(a[e].length))))}))))),r.a.createElement("div",{className:"content"},r.a.createElement("h4",{className:"title is-4"},"Graphically"),r.a.createElement(M,{newTotalSize:s,stylesheetContents:a})))}}]),a}(r.a.PureComponent),M=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=[],a=["#ff0029","#377eb8","#66a61e","#984ea3","#00d2d5","#ff7f00","#af8d00","#7f80cd","#b3e900","#c42e60","#a65628","#f781bf","#8dd3c7","#bebada","#fb8072","#80b1d3","#fdb462","#fccde5","#bc80bd","#ffed6f","#c4eaff","#cf8c00","#1b9e77","#d95f02","#e7298a","#e6ab02","#a6761d","#0097ff","#00d067"].sort((function(){return Math.random()-.5})),n=1;Object.keys(this.props.stylesheetContents).forEach((function(r){var s;t.push({label:(s=r,new URL(s).pathname),backgroundColor:a[n++],stack:"Before",data:[e.props.stylesheetContents[r].length,0]})})),t.push({label:"minimal",backgroundColor:a[0],stack:"After",data:[0,this.props.newTotalSize]});var r={labels:["Before","After"],datasets:t},s=document.getElementById("sizegraph").getContext("2d");new b.a(s,{type:"bar",data:r,options:{title:{display:!0,text:"Smaller bar(s) means less downloading time"},tooltips:{display:!1,mode:"index",intersect:!1,callbacks:{label:function(e,t){if(0===e.yLabel)return null;var a=t.datasets[e.datasetIndex].label||"";return a&&(a+=": "),a+=U(e.yLabel,0),a}}},legend:{display:!1},responsive:!0,scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0,ticks:{callback:function(e){return U(e,0)}}}]}}})}},{key:"render",value:function(){return r.a.createElement("canvas",{id:"sizegraph"})}}]),a}(r.a.PureComponent),x=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={waiting:0},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){e.dismounted||e.setState((function(e){return{waiting:e.waiting+1}}))}),1e3)}},{key:"componentWillUnmount",value:function(){this.dismounted=!0,this.interval&&clearInterval(this.interval)}},{key:"render",value:function(){return this.state.waiting<1?null:r.a.createElement("div",{className:"box"},r.a.createElement("p",null,"Fetching..."),r.a.createElement("p",null,"Been waiting for ",this.state.waiting," seconds"))}}]),a}(r.a.PureComponent),U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!e)return"0 bytes";var a=1024,n=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(e)/Math.log(a));return parseFloat((e/Math.pow(a,r)).toFixed(t))+" "+n[r]},P=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"column is-6 is-offset-3"},r.a.createElement("h1",{className:"title has-text-centered"},"About ",r.a.createElement("code",null,"minimalcss")),r.a.createElement("div",{className:"box"},r.a.createElement("p",null,"This is a online version that lets your try the",r.a.createElement("a",{href:"https://www.npmjs.com/package/minimalcss"},r.a.createElement("code",null,"minimalcss")," node package"),"."),r.a.createElement("p",null,"Normally you use ",r.a.createElement("code",null,"minimalcss")," in your server, continous integration or command line tooling to let it extract the minimal CSS a page/URL/site uses but this site let's you try it from the browser.",r.a.createElement("br",null),"Consider everything here experimental and this web app is not part of the core ",r.a.createElement("code",null,"minimalcss")," project."),r.a.createElement("h3",null,r.a.createElement(u.b,{to:"/"},"Go back Home"))))))}}]),a}(r.a.Component),T=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={navbarMenu:!1},e.toggleNavbarMenu=function(t){t.preventDefault(),e.setState({navbarMenu:!e.state.navbarMenu})},e}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(u.a,null,r.a.createElement("div",null,r.a.createElement("section",{className:"hero is-large header-image"},r.a.createElement("div",{className:"hero-head"},r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement("h1",{className:"brand-title"},r.a.createElement(u.c,{className:"navbar-item",to:"/"},r.a.createElement("code",null,"minimalcss"))),r.a.createElement("span",{onClick:this.toggleNavbarMenu,className:this.state.navbarMenu?"navbar-burger burger is-active":"navbar-burger burger","data-target":"navbarMenu"},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null))),r.a.createElement("div",{id:"navbarMenu",className:this.state.navbarMenu?"navbar-menu is-active":"navbar-menu"},r.a.createElement("div",{className:"navbar-end"},r.a.createElement(u.c,{to:"/",className:"navbar-item",activeClassName:"is-active",exact:!0},"Home"),r.a.createElement(u.c,{to:"/about",className:"navbar-item",activeClassName:"is-active"},"About minimalcss"),r.a.createElement("span",{className:"navbar-item"},r.a.createElement("a",{className:"button is-white is-outlined is-small",target:"_blank",rel:"noopener noreferrer",href:"https://github.com/peterbe/minimalcss-website"},r.a.createElement("span",null,"View Source"))))))))),r.a.createElement(h.c,null,r.a.createElement(h.a,{path:"/",exact:!0,component:S}),r.a.createElement(h.a,{path:"/about",component:P}),r.a.createElement(h.a,{component:A})),r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"content has-text-centered"},r.a.createElement("p",null,r.a.createElement("a",{href:"https://github.com/peterbe/minimalcss-website"},"minimalcss-website")," ","uses"," ",r.a.createElement("a",{href:"https://github.com/peterbe/minimalcss-server"},"minimalcss-server")," ","which uses"," ",r.a.createElement("a",{href:"https://github.com/peterbe/minimalcss"},"minimalcss")," ","by ",r.a.createElement("a",{href:"https://www.peterbe.com"},"@peterbe")," and"," ",r.a.createElement("a",{href:"https://twitter.com/stereobooster"},"@stereobooster"),"."),r.a.createElement("p",null,"Site design by ",r.a.createElement("a",{href:"https://bulma.io/"},"Bulma")," and"," ",r.a.createElement("a",{href:"http://html.mijnspeelplek.com/bulma1/"},"Bulma Templates")))))))}}]),a}(r.a.Component);function A(e){var t=e.location;return r.a.createElement("div",null,r.a.createElement("h3",null,"No match for ",r.a.createElement("code",null,t.pathname)))}a(43);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.f4bdc4f5.chunk.js.map